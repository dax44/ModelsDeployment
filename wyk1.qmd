---
title: "Wykad 1"
author: "Dariusz Majerek"
format: html
execute: 
  echo: true
  warning: false
embed-resources: true
editor_options: 
  chunk_output_type: console
---

Poniewa偶 proces budowy i udoskonalania modelu mo偶e trwa dugo i by prowadzony
przez kilka os贸b, to kontrolowanie wersji modelu wydaje si by konieczne.

::: column-margin
![](images/git.png){fig-align="center"}
:::

Ponadto konieczne w tym procesie jest kontrolowanie zar贸wno aktualnej wersji
modelu, jak i wszystkich przylegoci z nim zwizanych. Idealnym narzdziem do
zautomatyzowania czynnoci polegajcych na kontroli wersji jest program `git`.

Jest to darmowy program do pobrania ze [strony
domowej](https://git-scm.com/downloads) na dowolny system operacyjny. Jest to
program dziaajcy w terminalu ale istniej r贸wnie偶 jego wersje z przyjaznym
GUI (najbardziej znany to [GitHub Desktop](https://desktop.github.com)), przy
czym ten program jest jednoczenie poczony z hubem (czyli kontenerem)
pozwalajcym na przechowywanie i udostpnianie kodu w internecie, znanym jako
[GitHub](https://docs.github.com/en/desktop/installing-and-authenticating-to-github-desktop/installing-github-desktop).
Nie jest to jedyna usuga serwerowa, kt贸ra pozwala na zapisywanie i
udostpnianie kodu z wykorzystaniem gita. Inne znane alternatywy to GitLab i
Bitbucket.

::: column-margin
![](images/github.png){fig-align="center"}
:::

W niniejszym wykadzie zostan przedstawione rozwizania z wykorzystaniem Gita
i GitHuba.

Przykadowe repozytorium projektu `tidymodels` na stronie GitHub wyglda
nastpujco.

![Strona projektu tidymodels na
GitHubie](images/Zrzut%20ekranu%202024-01-4%20o%2015.07.25.png){fig-align="center"}

Git w poczeniu z GitHubem pozwala na przechowywanie wszystkich wersji kodu,
kt贸ry tworzymy, a jednoczenie na udostpnianie go oraz umo偶liwienie wsp贸pracy
nad kodem przez wielu u偶ytkownik贸w - wsp贸tw贸rc贸w (ang. *contributors*) ale nie
tylko. Udostpnianie mo偶e by zar贸wno publiczne, jak i prywatne.

Funkcjonalnoci GitHub, to:

1.  **Kontrola wersji kodu.**

2.  **Kopiowanie kodu na dwa sposoby:**

    a.  **Clone:**

        -   Klonowanie repozytorium oznacza skopiowanie zdalnego repozytorium
            na lokalny komputer.
        -   Gdy klonujesz repozytorium, uzyskujesz identyczn kopi zawartoci,
            historii i gazi tego repozytorium na swoim lokalnym systemie.
        -   Mo偶esz pracowa nad projektem lokalnie i wysya swoje zmiany z
            powrotem do zdalnego repozytorium.

        Przykad klonowania repozytorium:

    ``` bash
    git clone https://github.com/nazwa_uzytkownika/nazwa_repozytorium.git
    ```

    b.  **Fork:**

        -   *Forking* (rozszerzanie) repozytorium oznacza utworzenie kopii
            zdalnego repozytorium w obrbie twojego konta na GitHubie.
        -   Kiedy *forkujesz* repozytorium, masz wasn kopi, kt贸r mo偶esz
            dowolnie modyfikowa, nie wpywajc na oryginalne repozytorium.
        -   *Forkowanie* jest czsto u偶ywane w projekcie open source, gdzie
            chcesz doda swoje zmiany, ale nie masz bezporedniego dostpu do
            repozytorium.

        Przykad *forka* repozytorium:

        -   Na stronie repozytorium w witrynie GitHub klikasz przycisk "Fork" w
            prawym g贸rnym rogu. To utworzy kopi tego repozytorium w twoim
            wasnym koncie.

        *Forking* pozwala ci pracowa niezale偶nie nad projektem, a nastpnie
        mo偶esz zgosi *pull request* (prob o zaakceptowanie zmian) do
        oryginalnego repozytorium, aby waciciel m贸g uwzgldni twoje zmiany.

3.  **Zarzdzanie Branchami:**

    -   GitHub oferuje narzdzia do atwego zarzdzania gaziami (branches).
        Mo偶esz tworzy, usuwa i czy gazie za pomoc interfejsu
        graficznego.

4.  **Komentarze i Dyskusje:**

    -   Mo偶liwo dodawania komentarzy do kodu 藕r贸dowego, pull request贸w i
        problem贸w uatwia komunikacj w zespole.

5.  ***Issues*****:**

    -   GitHub umo偶liwia ledzenie problem贸w i zada (*issues*). Mo偶esz
        tworzy, przypisywa, zamyka i dyskutowa na temat problem贸w, co
        uatwia ledzenie postp贸w w projekcie.

6.  **Integracje i Webhooks:**

    -   GitHub oferuje integracje z r贸偶nymi narzdziami i usugami, co
        umo偶liwia automatyzacj r贸偶nych proces贸w w projekcie. Webhooki
        pozwalaj na powiadamianie zewntrznych usug o zdarzeniach na
        GitHubie.

7.  ***Pull Request Reviews*****:**

    -   Mo偶liwo recenzowania kodu 藕r贸dowego w ramach pull request贸w.
        Recenzenci mog komentowa zmiany, proponowa poprawki i potwierdza
        gotowo do zaakceptowania zmian.

8.  **GitHub Actions:**

    -   GitHub Actions to funkcja pozwalajca na automatyzacj proces贸w
        budowania, testowania i wdra偶ania kodu 藕r贸dowego za pomoc skrypt贸w.

9.  **Bezpieczestwo:**

    -   GitHub oferuje funkcje zabezpieczajce, takie jak uwierzytelnianie
        dwuskadnikowe, zarzdzanie dostpem i audyt.

czc Git z Githubem, programici zyskuj mocne narzdzie do kontroli wersji,
wsp贸pracy, ledzenia problem贸w i automatyzacji proces贸w, co przyczynia si do
skutecznego zarzdzania projektami oprogramowania[^1].

[^1]: Nie wszystkie z powy偶szych temat贸w uda nam si om贸wi na wykadzie ale
    wikszo zostanie zademonstrowana.

### Tworzenie repozytorium

#### Tworzenie konta na GitHub

Aby stworzy jakiekolwiek repozytorium, trzeba mie miejsce, w kt贸rym to
zrobimy. A zatem utworzymy nowe konto na GitHub.

1.  Przejd藕 na stron <https://github.com/>

    ![Strona domowa
    GitHub](images/Zrzut%20ekranu%202024-01-4%20o%2015.50.46.png)

2.  Nastpnie wpisz w miejsce na email sw贸j adres poczty.

3.  W kolejnym kroku wypenij pola na stronie

    ![](images/Zrzut%20ekranu%202024-01-4%20o%2015.51.27.png)

4.  Po wypenieniu wszystkich p贸l zostaniesz poproszony o rozwizanie testu na
    sprawdzenie czy jeste czowiekiem .

    ![](images/Zrzut%20ekranu%202024-01-4%20o%2015.52.31.png)

5.  Wpisz kod, kt贸ry otrzymasz na podany przez Ciebie email.

    ![](images/Zrzut%20ekranu%202024-01-4%20o%2015.53.08.png)

6.  W kolejnym oknie wybierz interesujce Ci funkcjonalnoci (mo偶esz te偶 nie
    wybiera 偶adnej).

    ![](images/Zrzut%20ekranu%202024-01-4%20o%2015.53.58.png)

7.  Na kolejnej stronie mo偶na wybra darmowe konto regularnego u偶ytkownika ale
    jest te偶 mo偶liwo zao偶enia konta studenckiego (w贸wczas trzeba przy
    logowaniu poda email uczelniany po czym nastpi weryfikacja). Konto
    studenckie daje nieco wicej mo偶liwoci ale konto darmowe wystarczy do
    naszych zada.

    ![](images/Zrzut%20ekranu%202024-01-4%20o%2015.54.30.png)

8.  W kolejnym kroku powiniene ju偶 zosta przeniesiony do strony g贸wnej
    Twojego konta na Githubie .

    ![](images/Zrzut%20ekranu%202024-01-4%20o%2016.49.46.png)

Cho wydaje si, 偶e to koniec, to niestety tak nie jest く. W roku 2022 GitHub
wprowadzi dodatkowe zabezpieczenia i ka偶de poczenie z GitHubem musi by
uwierzytelnione (wczeniej te偶 tak byo ale mimo to nieco prociej mo偶na byo
to zrobi). Instrukcj jak uwierzytelni GitHub wraz z instalacj i dodaniem
klucza publicznego SSH w Windows mo偶na znale藕 pod adresem [Instalacja Gita z
SSH](https://webcache.googleusercontent.com/search?q=cache:https://medium.com/devops-with-valentine/2021-how-to-set-up-your-ssh-key-for-github-on-windows-10-afe6e729a3c0&strip=0&vwsrc=1&referer=medium-parser).
Instrukcj dodawania klucza SSH dla r贸偶nych platform mo偶na znale藕 pod adresem
<https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account>.

Mo偶emy teraz przystpi do tworzenia repozytorium  . Za贸偶my, 偶e bdzie to
repozytorium przeznaczone do test贸w (std nazwa `Github_tests`).

::: column-margin
![](images/Zrzut%20ekranu%202024-01-4%20o%2017.28.17.png)
:::

Nazwa ta pewnie jest u偶ywana wielokrotnie w caym Githubie (patrz ) ale my
tworzymy repozytorium w ramach naszego konta dlatego faktycznie nazwa
repozytorium bdzie nastpujca `DariuszMajerek/Github_tests` - czyli jest
poczeniem nazwy u偶ytkownika i repozytorium.

![](images/Zrzut%20ekranu%202024-01-4%20o%2017.24.16.png){fig-align="center"}

Puste repozytorium wyglda nastpujco.

![](images/Zrzut%20ekranu%202024-01-4%20o%2017.30.53.png)

::: callout-important
Najwa偶niejsze z tej strony jest aby skopiowa adres repozytorium w formie HTTPS
[`https://github.com/DariuszMajerek/Github_tests.git`](https://github.com/DariuszMajerek/Github_tests.git)
lub SSH `git@github.com:DariuszMajerek/Github_tests.git`.
:::

### czenie repozytorium lokalnego ze zdalnym

P贸ki co istniej tylko repozytorium zdalne (na Githubie, z reszt puste) ale nie
istnieje jego odpowiednik na dysku lokalnym. W tym celu nale偶y utworzy katalog
o tej samej nazwie co nazwa repozytorium (bez nazwy u偶ytkownika) a nastpnie
przej do tego katalogu.

![Tworzenie katalogu
repo](images/Zrzut%20ekranu%202024-01-4%20o%2018.15.27.png)

::: callout-caution
Powy偶szy ekran mo偶e nieco inaczej wyglda w innych systemach operacyjnych.
:::

W katalogu repo[^2] inicjujemy repo lokalne poprzez

```{bash}
git init

# nastepnie sprawdzamy status repo
git status
```

![](images/Zrzut%20ekranu%202024-01-4%20o%2019.41.21.png)

Zainicjowanie lokalnego repo pozwala wymienia dane pomidzy repo lokalnym i
zdalnym (w obie strony). Mo偶emy o tym myle w ten spos贸b, 偶e s trzy stany
naszego repo:

-   lokalne - na dysku (ang. *working dir*);
-   zdalne - na serwerze np. Github (ang. *HEAD*);
-   tymczasowe - instancja naszego repo w wersji tymczasowej istniejca na
    dysku (ang. *index*), kt贸ra powinna zosta przesana (wypchnita - *push*)
    na serwer. Ta czynno jest opisana w t stron, bo najczciej to zmiany
    na dysku lokalnym, gdzie tworzymy model, wypychamy na serwer.

![Trzy stany repo](images/Zrzut%20ekranu%202024-01-4%20o%2018.22.05.png)

Inicjacja jedynie tworzy katalog `.git` z plikami konfiguracyjnymi repo. Nic
poza tym katalogiem nie zawiera. Teraz przystpimy do dodania pierwszego pliku
do repo. Dobrym zwyczajem jest dodanie pliku `README.md`, w kt贸rym znajd si
podstawowe informacje dotyczce repo. Plik ten powinien by napisany w jzyku
markdown aby GitHub m贸g bo przetworzy i wywietli w sformatowany spos贸b.

```{bash}
# plik README.md mo偶na utworzy na kilka spos贸b贸w, m.in w R
# w poni偶szym przykadzie pokazuj jak to mo偶na zrobi w terminalu
# poni偶szy kod stworzy nowy plik README.md i doda jedynie tytu rozdziau 
echo "# Github_tests" >> README.md
```

Jak wida na zaczonym obrazie powsta plik `README.md` i zosta wypeniony
treci.

![](images/Zrzut%20ekranu%202024-01-4%20o%2018.34.39.png)

Poniewa偶 nastpiy pierwsze zmiany w repo (dodalimy plik README.md), to mo偶emy
te zmiany wysa na serwer, na kt贸rym obecnie zmiany te nie s jeszcze
uwzgldnione.

```{bash}
# dodajemy plik README.md do commita, czyli nowej wersji repo
# commitami oznaczamy nowe wersje repo
git add README.md

# jeli chcemy doda wicej plik贸w i katalog贸w jednoczenie (a tak si dzieje najczciej)
# bo chcemy commitowa stan po zmianach w repo to wywoujemy
git add .
```

Po tej czynnoci mo偶emy sprawdzi status repo za pomoc

```{bash}
git status
```

Wynik tych dziaa jest nastpujcy

![Repo po zmianach](images/Zrzut%20ekranu%202024-01-4%20o%2018.41.49.png)

Jak wida plik `README.md` zosta dodany do tymczasowego stanu repo ale nie
zosta on jeszcze przesany na serwer. Wida te偶, 偶e 偶aden *commit* nie zosta
utworzony. Przez *commit* rozumiemy jakby *snapshot* obecnego stanu repo. P贸ki
go nie wypchniemy na serwer zmiany te s zapisane jedynie lokalnie. Przejd藕my
do pierwszego *commitu* naszego repo. Ka偶dy commit powinien by opatrzony
komentarzem, kt贸ry informuje nas co zmienilimy w repo[^3]. Flaga `-m` oznacza
ch dodania komentarza.

```{bash}
git commit -m "pierwszy commit"
```

Po wykonaniu commita i sprawdzeniu stanu

![](images/Zrzut%20ekranu%202024-01-4%20o%2019.44.47.png)

Cho stworzylimy commita, wic zapisalimy stan repo po zmianach, to zmiany te
nie zostay zaktualizowane na serwerze GitHub. Aby tego dokona musimy poda
adres repo zdalnego oraz wypchn lokalne zmiany na serwer.

```{bash}
# podczenie zdalnego repo pod nazw origin
git remote add origin "git@github.com:DariuszMajerek/Github_tests.git"
```

[^2]: skr贸t od repozytorium

[^3]: wprawdzie na tym etapie dodalimy plik `README.md` ale poniewa偶 jest to
    pierwszy *commit* to tak go nazwalimy.

### Komunikacja pomidzy lokalnym i zdalnym repo

Pozostao nam wypchn pliki na serwer.

```{bash}
# poniewa偶 wypychamy g贸wn ga藕 nazwan main to komenda jest nastpujca
git push -u origin main
```

Ustawienie flagi `-u` w poleceniu `git push` ustawia tzw *upstream*. W
przyszoci jeli chcemy wypchn stan repo lokalnego wystarczy komenda
`git push` bez `origin` i `main` o ile chcemy wysa wszystko do tej samej
gazi.

W momencie wywoania tej komendy bdziemy prawdopodobnie poproszeni o haso do
konta GitHub. Jeli si wszystko powiedzie, to ekran powinien wyglda
nastpujco.

![README.md dodane do repo
zdalnego](images/Zrzut%20ekranu%202024-01-4%20o%2022.56.01.png)

I faktycznie w repo zdalnym si to znajduje

![Uwaga: w kolejnej pr贸bie (bo pierwsza si nie udaa) dodaem commit z inn
nazw "first commit"](images/Zrzut%20ekranu%202024-01-4%20o%2023.11.55.png)

Po dodaniu commita i push do gazi g贸wnej `main` stan repo lokalnego (na
dysku komputera) i zdalnego s identyczne.

![](images/Zrzut%20ekranu%202024-01-4%20o%2023.18.25.png)

Jeli chcemy pobra obecny stan repo na dysk lokalny, w贸wczas u偶ywamy komendy
`git pull remote_name branch_name`, gdzie `remote_name` oznacza adres zdalnego
repo, a `branch_name` nazw gazi jak chcemy pobra (w tym momencie nasze
repo posiada tylko jedn ga藕 ale w przyszoci mo偶e mie ich wicej).

::: callout-important
Bardzo wa偶n zasad jest to aby repo zdalne i lokalne byy identyczne. Dba o
to bdzie sam git. Natomiast jeli zaczynamy pracowa nad rozwojem repo, dobr
praktyk jest najpierw pobranie obecnego stanu repo zdalnego przez komend
`git pull`.
:::

Mo偶e si r贸wnie偶 zdarzy, 偶e wsp贸pracownicy, kt贸rzy pracuj r贸wnolegle nad
naszym projektem mog dokona zmiany zdalnego repo i w贸wczas pobranie obecnego
stanu repo zdalnego jest niemal zawsze konieczne.

Poniewa偶 zmian w repo zdalnym mo偶na dokonywa za pomoc przegldarki i strony
GitHub, to dokonamy rozwinicia README.md. Zmiany dokonywane na serwerze
(poprzez stron internetow) wymagaj r贸wnie偶 commitowania zmian, tak abymy
mogli kontrolowa wersj naszego repo. W pliku README.md dodaem jedno zdanie o
treci "To repozytarium bdzie su偶y do wicze zwizanych z usugami kontroli
wersji." i commitowaem to z komentarzem "Update README.md".

![](images/Zrzut%20ekranu%202024-01-6%20o%2011.30.18.png)

To jest stan najbardziej aktualny naszego repo. Dlatego pobierzemy go na dysk
aby repo lokalne i zdalne si zgadzay.

```{bash}
# pobieramy aktualny stan repo zdalnego
# poniewa偶 mamy tylko jedn ga藕 a origin jest ustawione na waciwe repo
# ponadto ustawilimy wczeniej flag przy push -u to nie musimy dodawa innych parametr贸w
git pull
```

![Efekt dziaania git
pull](images/Zrzut%20ekranu%202024-01-6%20o%2011.32.09.png)

Czujne oko pewnie ju偶 zauwa偶yo, 偶e w pliku README.md wpisujc zdanie
popeniem bd (liter贸wk) w sowie repozytorium. Poniewa偶 plik mamy pobrany
do lokalnego repo, to mo偶emy go poprawi (lokalnie np. w RStudio) i wypchn na
serwer. Po zmianach lokalnego repo stan jest nastpujcy

![](images/Zrzut%20ekranu%202024-01-6%20o%2011.37.54.png)

Jak wida cz zmian nie zostaa commitowana. Zmiany dokonane lokalnie
najpierw trzeba doda do tzw *Stage*, a nastpnie je commitowa.

```{bash}
git add . # dodajemy zmiany do Stage
git status # po to by zobaczy stan Stage
git commit -m "Fix typo in README.md"
git stage
```

![](images/Zrzut%20ekranu%202024-01-6%20o%2011.40.36.png)

```{bash}
# podobnie przy wypychaniu jeli chcemy wypchn do gazi g贸wnej
# to nie musimy dodawa parametr贸w przy git push
git push
```

![Stan po wypchniciu danych na
serwer](images/Zrzut%20ekranu%202024-01-6%20o%2011.41.44.png)

Zmiany na serwerze zostay zapisane.

![](images/Zrzut%20ekranu%202024-01-6%20o%2011.43.07.png)

::: callout-note
Polecenie `git pull` jest poczeniem `git fetch`, kt贸re pobiera ostatnie
zatwierdzenia w lokalnym repozytorium i `git merge`, kt贸re poczy ga藕 ze
zdalnej do lokalnej gazi.
:::
